<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluffy Bears - Staking Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* General styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #FFA726;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="20" cy="20" r="10" fill="%23F57C00" opacity="0.3"/><circle cx="60" cy="30" r="15" fill="%23F57C00" opacity="0.3"/><circle cx="80" cy="70" r="12" fill="%23F57C00" opacity="0.3"/><circle cx="30" cy="60" r="8" fill="%23F57C00" opacity="0.3"/><circle cx="50" cy="90" r="14" fill="%23F57C00" opacity="0.3"/></svg>');
            background-size: 400px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Background elements */
        .tree {
            position: absolute;
            width: 120px;
            height: 200px;
            background-color: #2E7D32;
            clip-path: polygon(50% 0%, 20% 40%, 30% 40%, 15% 60%, 25% 60%, 0% 100%, 100% 100%, 75% 60%, 85% 60%, 70% 40%, 80% 40%);
            z-index: -1;
        }
        
        .tree-1 {
            top: 50px;
            left: 5%;
            transform: scale(0.8);
        }
        
        .tree-2 {
            top: 100px;
            right: 5%;
            transform: scale(1.2);
        }
        
        .tree-3 {
            bottom: 50px;
            left: 15%;
            transform: scale(0.9);
        }
        
        .tree-4 {
            bottom: 80px;
            right: 15%;
            transform: scale(1.1);
        }
        
        .honey-drop {
            position: absolute;
            background-color: #FFC107;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
            z-index: -1;
        }
        
        .drop-1 {
            width: 30px;
            height: 40px;
            top: 120px;
            left: 25%;
            transform: rotate(15deg);
        }
        
        .drop-2 {
            width: 40px;
            height: 55px;
            top: 200px;
            right: 30%;
            transform: rotate(-20deg);
        }
        
        .drop-3 {
            width: 25px;
            height: 35px;
            bottom: 150px;
            left: 40%;
            transform: rotate(10deg);
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
            max-width: 900px;
        }
        
        .logo {
            font-size: 36px;
            font-weight: bold;
            color: #5D4037;
            text-align: center;
            background-color: #FFF8E1;
            padding: 15px 30px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 4px solid #5D4037;
            position: relative;
            z-index: 1;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo-text {
            height: 100px;
            margin-right: 10px;
        }
        
        .logo-title {
            font-size: 32px;
            color: #5D4037;
        }
        
        .bear-icon {
            position: absolute;
            right: -20px;
            top: -20px;
            width: 100px;
            height: 100px;
            z-index: 2;
        }
        
        .bear-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Main container */
        .main-container {
            background-color: #FFF8E1;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            padding: 30px;
            width: 100%;
            max-width: 900px;
            border: 4px solid #5D4037;
            margin-bottom: 30px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 3px solid #5D4037;
            padding-bottom: 10px;
        }
        
        .tab {
            padding: 10px 20px;
            background-color: #FFC107;
            color: #5D4037;
            font-weight: bold;
            border: 3px solid #5D4037;
            border-radius: 10px 10px 0 0;
            margin-right: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background-color: #5D4037;
            color: #FFF8E1;
        }
        
        .tab:hover:not(.active) {
            background-color: #FFD54F;
        }
        
        /* Tab content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Simulation form */
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .input-field {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #5D4037;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 3px solid #5D4037;
            border-radius: 10px;
            font-size: 16px;
            background-color: #FFF;
            color: #5D4037;
        }
        
        button {
            background-color: #FFC107;
            color: #5D4037;
            border: 3px solid #5D4037;
            padding: 12px 25px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            box-shadow: 0 4px 0 #5D4037;
        }
        
        button:hover {
            background-color: #FFD54F;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #5D4037;
        }
        
        button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #5D4037;
        }
        
        /* Results */
        .results {
            margin-top: 30px;
            display: none;
        }
        
        .results-title {
            font-size: 24px;
            color: #5D4037;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .results-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-card {
            flex: 1;
            min-width: 200px;
            background-color: #5D4037;
            border-radius: 15px;
            padding: 15px;
            color: #FFF8E1;
            border: 3px solid #3E2723;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .result-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .result-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .chart-container {
            position: relative;
            height: 350px;
            margin: 30px 0;
            background-color: #FFF;
            border-radius: 15px;
            padding: 15px;
            border: 3px solid #5D4037;
        }
        
        .table-container {
            max-height: 350px;
            overflow-y: auto;
            margin-top: 30px;
            background-color: #FFF;
            border-radius: 15px;
            border: 3px solid #5D4037;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .results-table th, .results-table td {
            border: 2px solid #5D4037;
            padding: 10px;
            text-align: right;
        }
        
        .results-table th {
            background-color: #5D4037;
            color: #FFF8E1;
            font-weight: 600;
            text-align: center;
        }
        
        .results-table tr:nth-child(even) {
            background-color: #FFF8E1;
        }
        
        .results-table tr:nth-child(odd) {
            background-color: #FFF;
        }
        
        /* Responsiveness */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
            }
            
            .logo {
                font-size: 28px;
                padding: 15px;
            }
            
            .logo-text {
                height: 40px;
            }
            
            .logo-title {
                font-size: 24px;
            }
            
            .bear-icon {
                width: 80px;
                height: 80px;
                right: 10px;
                top: -15px;
            }
            
            .input-field {
                min-width: 100%;
            }
            
            .tabs {
                overflow-x: auto;
                padding-bottom: 5px;
            }
            
            .tab {
                padding: 8px 15px;
                font-size: 14px;
            }
            
            .main-container {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Background elements -->
    <div class="tree tree-1"></div>
    <div class="tree tree-2"></div>
    <div class="tree tree-3"></div>
    <div class="tree tree-4"></div>
    
    <div class="honey-drop drop-1"></div>
    <div class="honey-drop drop-2"></div>
    <div class="honey-drop drop-3"></div>
    
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <img src="/Images/textologo.png" alt="Fluffy Bears Logo" class="logo-text">
            <span class="logo-title">Staking Simulator</span>
        </div>
        <div class="bear-icon">
            <img src="/Images/logotransparente.png" alt="Bear Icon">
        </div>
    </div>
    
    <!-- Main container -->
    <div class="main-container">
        <!-- Tabs -->
        <div class="tabs">
            <div class="tab active" data-tab="simulator">Simulator</div>
            <div class="tab" data-tab="info">Information</div>
            <a href="/" class="tab" style="text-decoration: none; display: inline-block;">Back to Home</a>
        </div>
        
        <!-- Simulator tab content -->
        <div class="tab-content active" id="simulator-content">
            <div class="input-group">
                <div class="input-field">
                    <label for="aprBeraPool">BERA/BGT Pool APR (%)</label>
                    <input type="number" id="aprBeraPool" min="0" step="0.01" value="317">
                </div>
                
                <div class="input-field">
                    <label for="aprBgtStake">BGT Stake APR (%)</label>
                    <input type="number" id="aprBgtStake" min="0" step="0.01" value="328">
                </div>
            </div>
            
            <div class="input-group">
                <div class="input-field">
                    <label for="initialBera">Initial BERA Value</label>
                    <input type="number" id="initialBera" min="0" step="1" value="50000">
                </div>
                
                <div class="input-field">
                    <label for="totalNfts">Number of Participating NFTs</label>
                    <input type="number" id="totalNfts" min="1" step="1" value="100">
                </div>
            </div>
            
            <div class="input-group">
                <div class="input-field">
                    <label for="stakeDays">Days in Stake (Participants Average)</label>
                    <input type="number" id="stakeDays" min="1" max="45" step="1" value="45">
                </div>
                
                <div class="input-field">
                    <label for="yourStakeDays">Your Days in Stake</label>
                    <input type="number" id="yourStakeDays" min="1" max="45" step="1" value="15">
                </div>
            </div>
            
            <div class="input-group">
                <div class="input-field">
                    <label for="yourNftsCount">Number of NFTs in Stake</label>
                    <input type="number" id="yourNftsCount" min="1" step="1" value="1">
                </div>
            </div>
            
            <button id="calculateBtn">Calculate Rewards</button>
            
            <div class="results" id="resultsContainer">
                <div class="results-title">Simulation Results</div>
                
                <div class="results-cards">
                    <div class="result-card">
                        <div class="result-label">Total BGT Accumulated after 45 days:</div>
                        <div class="result-value" id="totalBgt">0 BGT</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Total Community Points Accumulated:</div>
                        <div class="result-value" id="totalCommunityPoints">0 points</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Value per Point:</div>
                        <div class="result-value" id="valuePerPoint">0 BGT</div>
                    </div>
                </div>
                
                <div class="results-cards">
                    <div class="result-card">
                        <div class="result-label">Your Accumulated Points:</div>
                        <div class="result-value" id="yourPoints">0 points</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Your Estimated Reward:</div>
                        <div class="result-value" id="yourReward">0 BGT</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="rewardsChart"></canvas>
                </div>
                
                <div class="table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Day</th>
                                <th>Daily Reward (BGT)</th>
                                <th>BERA/BGT Pool Reward</th>
                                <th>BGT Stake Reward</th>
                                <th>Total Accumulated (BGT)</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody">
                            <!-- Data will be inserted via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Information tab content -->
        <div class="tab-content" id="info-content">
            <h2 style="color: #5D4037; margin-bottom: 20px;">How Fluffy Bears Staking Works</h2>
            
            <p style="margin-bottom: 15px; line-height: 1.6;">The Fluffy Bears staking system allows NFT holders to stake their collections and receive rewards in BERA tokens.</p>
            
            <h3 style="color: #5D4037; margin: 20px 0 10px;">Staking Points</h3>
            <ul style="margin-left: 20px; margin-bottom: 20px; line-height: 1.6;">
                <li>Each staked NFT accumulates <strong>86,400 points per day</strong> (1 point per second)</li>
                <li>The minimum staking period is <strong>15 days</strong></li>
                <li>Rewards distribution occurs every <strong>45 days</strong></li>
            </ul>
            
            <h3 style="color: #5D4037; margin: 20px 0 10px;">Rewards</h3>
            <ul style="margin-left: 20px; margin-bottom: 20px; line-height: 1.6;">
                <li>Rewards are generated from BERA tokens collected during mint</li>
                <li>Tokens are invested in BERA/BGT liquidity pools</li>
                <li>Yields are distributed proportionally to accumulated points</li>
                <li>The longer your NFT stays staked, the more points and rewards you'll receive</li>
            </ul>
            
            <h3 style="color: #5D4037; margin: 20px 0 10px;">Simulator</h3>
            <p style="margin-bottom: 15px; line-height: 1.6;">Use the simulator to estimate your potential rewards based on current market parameters and the number of participating NFTs.</p>
        </div>
    </div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const totalBgtElement = document.getElementById('totalBgt');
        const totalCommunityPointsElement = document.getElementById('totalCommunityPoints');
        const valuePerPointElement = document.getElementById('valuePerPoint');
        const yourPointsElement = document.getElementById('yourPoints');
        const yourRewardElement = document.getElementById('yourReward');
        const resultsTableBody = document.getElementById('resultsTableBody');
        
        // Chart variables
        let rewardsChart = null;
        
        // Function to switch between tabs
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Show corresponding content
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });
        
        // Function to format numbers
        function formatNumber(number) {
            return number.toLocaleString('en-US', { 
                minimumFractionDigits: 2, 
                maximumFractionDigits: 6 
            });
        }
        
        // Function to calculate rewards
        calculateBtn.addEventListener('click', function() {
            // Get input values
            const aprBeraPool = parseFloat(document.getElementById('aprBeraPool').value) / 365; // Daily APR
            const aprBgtStake = parseFloat(document.getElementById('aprBgtStake').value) / 365; // Daily APR
            const initialBera = parseFloat(document.getElementById('initialBera').value);
            const totalNfts = parseInt(document.getElementById('totalNfts').value);
            const stakeDays = parseInt(document.getElementById('stakeDays').value);
            const yourStakeDays = parseInt(document.getElementById('yourStakeDays').value);
            const yourNftsCount = parseInt(document.getElementById('yourNftsCount').value);
            
            // Validate inputs
            if (isNaN(aprBeraPool) || isNaN(aprBgtStake) || isNaN(initialBera) || 
                isNaN(totalNfts) || isNaN(stakeDays) || isNaN(yourStakeDays) || isNaN(yourNftsCount)) {
                alert('Please fill in all fields with valid values.');
                return;
            }
            
            if (stakeDays < 1 || stakeDays > 45 || yourStakeDays < 1 || yourStakeDays > 45) {
                alert('Days in stake must be between 1 and 45.');
                return;
            }
            
            if (totalNfts < 1) {
                alert('Number of participating NFTs must be at least 1.');
                return;
            }
            
            if (yourNftsCount < 1) {
                alert('Number of NFTs in stake must be at least 1.');
                return;
            }
            
            if (yourNftsCount > totalNfts) {
                alert('Your NFTs count cannot be greater than the total participating NFTs.');
                return;
            }
            
            // Calculate daily rewards
            let dailyRewards = [];
            let totalBgtAccumulated = 0;
            let bgtStaked = 0;
            
            for (let day = 1; day <= 45; day++) {
                // BERA/BGT pool reward
                const beraPoolReward = initialBera * (aprBeraPool / 100);
                
                // BGT stake reward
                const bgtStakeReward = bgtStaked * (aprBgtStake / 100);
                
                // Total daily reward
                const dailyReward = beraPoolReward + bgtStakeReward;
                
                // Accumulate BGT for stake
                bgtStaked += beraPoolReward;
                
                // Accumulate total BGT
                totalBgtAccumulated += dailyReward;
                
                // Store day data
                dailyRewards.push({
                    day,
                    dailyReward,
                    beraPoolReward,
                    bgtStakeReward,
                    totalAccumulated: totalBgtAccumulated
                });
            }
            
            // Calculate points and rewards
            const pointsPerDay = 86400; // 1 point per second
            const totalPoints = totalNfts * stakeDays * pointsPerDay;
            const valuePerPoint = totalBgtAccumulated / totalPoints;
            const yourPoints = yourNftsCount * yourStakeDays * pointsPerDay;
            const yourReward = yourPoints * valuePerPoint;
            
            // Update result elements
            totalBgtElement.textContent = `${formatNumber(totalBgtAccumulated)} BGT`;
            totalCommunityPointsElement.textContent = `${formatNumber(totalPoints)} points`;
            valuePerPointElement.textContent = `${valuePerPoint.toFixed(10)} BGT`;
            yourPointsElement.textContent = `${formatNumber(yourPoints)} points`;
            yourRewardElement.textContent = `${formatNumber(yourReward)} BGT`;
            
            // Fill results table
            resultsTableBody.innerHTML = '';
            dailyRewards.forEach(reward => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${reward.day}</td>
                    <td>${formatNumber(reward.dailyReward)}</td>
                    <td>${formatNumber(reward.beraPoolReward)}</td>
                    <td>${formatNumber(reward.bgtStakeReward)}</td>
                    <td>${formatNumber(reward.totalAccumulated)}</td>
                `;
                resultsTableBody.appendChild(row);
            });
            
            // Create chart data
            const labels = dailyRewards.map(reward => `Day ${reward.day}`);
            const data = dailyRewards.map(reward => reward.totalAccumulated);
            
            // Update or create chart
            if (rewardsChart) {
                rewardsChart.data.labels = labels;
                rewardsChart.data.datasets[0].data = data;
                rewardsChart.update();
            } else {
                const ctx = document.getElementById('rewardsChart').getContext('2d');
                rewardsChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Accumulated BGT',
                            data: data,
                            backgroundColor: 'rgba(93, 64, 55, 0.2)',
                            borderColor: '#5D4037',
                            borderWidth: 3,
                            pointRadius: 4,
                            pointBackgroundColor: '#FFC107',
                            pointBorderColor: '#5D4037',
                            pointBorderWidth: 2,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'BGT Growth Over Time',
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                },
                                color: '#5D4037',
                                padding: 20
                            },
                            tooltip: {
                                backgroundColor: '#5D4037',
                                titleColor: '#FFF8E1',
                                bodyColor: '#FFF8E1',
                                borderColor: '#3E2723',
                                borderWidth: 1,
                                cornerRadius: 8,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return `Accumulated BGT: ${formatNumber(context.parsed.y)}`;
                                    }
                                }
                            },
                            legend: {
                                labels: {
                                    color: '#5D4037',
                                    font: {
                                        weight: 'bold'
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    maxRotation: 45,
                                    minRotation: 45,
                                    color: '#5D4037',
                                    callback: function(value, index) {
                                        // Show only some days to avoid overcrowding the X axis
                                        return index % 5 === 0 ? this.getLabelForValue(value) : '';
                                    }
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(93, 64, 55, 0.1)'
                                },
                                ticks: {
                                    color: '#5D4037'
                                },
                                title: {
                                    display: true,
                                    text: 'Accumulated BGT',
                                    color: '#5D4037',
                                    font: {
                                        weight: 'bold'
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Show results
            resultsContainer.style.display = 'block';
            
            // Scroll to results
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
